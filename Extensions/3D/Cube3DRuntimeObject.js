var gdjs;(function(n){const s={front:0,back:1,left:2,right:3,top:4,bottom:5};class r extends n.RuntimeObject3D{constructor(t,e){super(t,e);this._materialType=n.Cube3DRuntimeObject.MaterialType.StandardWithoutMetalness;this._isCastingShadow=!0;this._isReceivingShadow=!0;this._shouldUseTransparentTexture=e.content.enableTextureTransparency||!1,this._facesOrientation=e.content.facesOrientation||"Y",this._visibleFacesBitmask=0,e.content.frontFaceVisible&&(this._visibleFacesBitmask|=1<<s.front),e.content.backFaceVisible&&(this._visibleFacesBitmask|=1<<s.back),e.content.leftFaceVisible&&(this._visibleFacesBitmask|=1<<s.left),e.content.rightFaceVisible&&(this._visibleFacesBitmask|=1<<s.right),e.content.topFaceVisible&&(this._visibleFacesBitmask|=1<<s.top),e.content.bottomFaceVisible&&(this._visibleFacesBitmask|=1<<s.bottom),this._textureRepeatFacesBitmask=0,e.content.frontFaceResourceRepeat&&(this._textureRepeatFacesBitmask|=1<<s.front),e.content.backFaceResourceRepeat&&(this._textureRepeatFacesBitmask|=1<<s.back),e.content.leftFaceResourceRepeat&&(this._textureRepeatFacesBitmask|=1<<s.left),e.content.rightFaceResourceRepeat&&(this._textureRepeatFacesBitmask|=1<<s.right),e.content.topFaceResourceRepeat&&(this._textureRepeatFacesBitmask|=1<<s.top),e.content.bottomFaceResourceRepeat&&(this._textureRepeatFacesBitmask|=1<<s.bottom),this._backFaceUpThroughWhichAxisRotation=e.content.backFaceUpThroughWhichAxisRotation||"X",this._faceResourceNames=[e.content.frontFaceResourceName,e.content.backFaceResourceName,e.content.leftFaceResourceName,e.content.rightFaceResourceName,e.content.topFaceResourceName,e.content.bottomFaceResourceName],this._tint=e.content.tint||"255;255;255",this._isCastingShadow=e.content.isCastingShadow||!1,this._isReceivingShadow=e.content.isReceivingShadow||!1,this._materialType=this._convertMaterialType(e.content.materialType),this._renderer=new n.Cube3DRuntimeObjectRenderer(this,t),this.onCreated()}setFaceVisibility(t,e){const i=s[t];i!==void 0&&e!==this.isFaceAtIndexVisible(i)&&(e?this._visibleFacesBitmask|=1<<i:this._visibleFacesBitmask&=~(1<<i),this._renderer.updateFace(i))}setRepeatTextureOnFace(t,e){const i=s[t];i!==void 0&&e!==this.shouldRepeatTextureOnFaceAtIndex(i)&&(e?this._textureRepeatFacesBitmask|=1<<i:this._textureRepeatFacesBitmask&=~(1<<i),this._renderer.updateFace(i))}isFaceVisible(t){const e=s[t];return e===void 0?!1:this.isFaceAtIndexVisible(e)}isFaceAtIndexVisible(t){return(this._visibleFacesBitmask&1<<t)!=0}shouldRepeatTextureOnFaceAtIndex(t){return(this._textureRepeatFacesBitmask&1<<t)!=0}setFaceResourceName(t,e){const i=s[t];i!==void 0&&this._faceResourceNames[i]!==e&&(this._faceResourceNames[i]=e,this._renderer.updateFace(i))}setColor(t){this._tint!==t&&(this._tint=t,this._renderer.updateTint())}getColor(){return this._tint}getFaceAtIndexResourceName(t){return this._faceResourceNames[t]}getRenderer(){return this._renderer}getBackFaceUpThroughWhichAxisRotation(){return this._backFaceUpThroughWhichAxisRotation}setBackFaceUpThroughWhichAxisRotation(t){this._backFaceUpThroughWhichAxisRotation=t,this._renderer.updateFace(s.back)}getFacesOrientation(){return this._facesOrientation}setFacesOrientation(t){this._facesOrientation=t,this._renderer.updateFace(s.left),this._renderer.updateFace(s.right),this._renderer.updateFace(s.top)}updateFromObjectData(t,e){return super.updateFromObjectData(t,e),t.content.frontFaceVisible!==e.content.frontFaceVisible&&this.setFaceVisibility("front",e.content.frontFaceVisible),t.content.backFaceVisible!==e.content.backFaceVisible&&this.setFaceVisibility("back",e.content.backFaceVisible),t.content.leftFaceVisible!==e.content.leftFaceVisible&&this.setFaceVisibility("left",e.content.leftFaceVisible),t.content.rightFaceVisible!==e.content.rightFaceVisible&&this.setFaceVisibility("right",e.content.rightFaceVisible),t.content.topFaceVisible!==e.content.topFaceVisible&&this.setFaceVisibility("top",e.content.topFaceVisible),t.content.bottomFaceVisible!==e.content.bottomFaceVisible&&this.setFaceVisibility("bottom",e.content.bottomFaceVisible),t.content.frontFaceResourceName!==e.content.frontFaceResourceName&&this.setFaceResourceName("front",e.content.frontFaceResourceName),t.content.tint!==e.content.tint&&this.setColor(e.content.tint||"255;255;255"),t.content.backFaceResourceName!==e.content.backFaceResourceName&&this.setFaceResourceName("back",e.content.backFaceResourceName),t.content.leftFaceResourceName!==e.content.leftFaceResourceName&&this.setFaceResourceName("left",e.content.leftFaceResourceName),t.content.rightFaceResourceName!==e.content.rightFaceResourceName&&this.setFaceResourceName("right",e.content.rightFaceResourceName),t.content.topFaceResourceName!==e.content.topFaceResourceName&&this.setFaceResourceName("top",e.content.topFaceResourceName),t.content.bottomFaceResourceName!==e.content.bottomFaceResourceName&&this.setFaceResourceName("bottom",e.content.bottomFaceResourceName),t.content.frontFaceResourceRepeat!==e.content.frontFaceResourceRepeat&&this.setRepeatTextureOnFace("front",e.content.frontFaceResourceRepeat||!1),t.content.backFaceResourceRepeat!==e.content.backFaceResourceRepeat&&this.setRepeatTextureOnFace("back",e.content.backFaceResourceRepeat||!1),t.content.leftFaceResourceRepeat!==e.content.leftFaceResourceRepeat&&this.setRepeatTextureOnFace("left",e.content.leftFaceResourceRepeat||!1),t.content.rightFaceResourceRepeat!==e.content.rightFaceResourceRepeat&&this.setRepeatTextureOnFace("right",e.content.rightFaceResourceRepeat||!1),t.content.topFaceResourceRepeat!==e.content.topFaceResourceRepeat&&this.setRepeatTextureOnFace("top",e.content.topFaceResourceRepeat||!1),t.content.bottomFaceResourceRepeat!==e.content.bottomFaceResourceRepeat&&this.setRepeatTextureOnFace("bottom",e.content.bottomFaceResourceRepeat||!1),t.content.backFaceUpThroughWhichAxisRotation!==e.content.backFaceUpThroughWhichAxisRotation&&this.setBackFaceUpThroughWhichAxisRotation(e.content.backFaceUpThroughWhichAxisRotation||"X"),t.content.facesOrientation!==e.content.facesOrientation&&this.setFacesOrientation(e.content.facesOrientation||"Y"),t.content.materialType!==e.content.materialType&&this.setMaterialType(e.content.materialType),t.content.isCastingShadow!==e.content.isCastingShadow&&this.updateShadowCasting(e.content.isCastingShadow),t.content.isReceivingShadow!==e.content.isReceivingShadow&&this.updateShadowReceiving(e.content.isReceivingShadow),!0}getNetworkSyncData(t){return{...super.getNetworkSyncData(t),mt:this._materialType,fo:this._facesOrientation,bfu:this._backFaceUpThroughWhichAxisRotation,vfb:this._visibleFacesBitmask,trfb:this._textureRepeatFacesBitmask,frn:this._faceResourceNames,tint:this._tint}}updateFromNetworkSyncData(t,e){if(super.updateFromNetworkSyncData(t,e),t.mt!==void 0&&(this._materialType=t.mt),t.fo!==void 0&&this._facesOrientation!==t.fo&&this.setFacesOrientation(t.fo),t.bfu!==void 0&&this._backFaceUpThroughWhichAxisRotation!==t.bfu&&this.setBackFaceUpThroughWhichAxisRotation(t.bfu),t.vfb!==void 0&&this._visibleFacesBitmask!==t.vfb){this._visibleFacesBitmask=t.vfb;for(let i=0;i<this._faceResourceNames.length;i++)this._renderer.updateFace(i)}if(t.trfb!==void 0&&this._textureRepeatFacesBitmask!==t.trfb){this._textureRepeatFacesBitmask=t.trfb;for(let i=0;i<this._faceResourceNames.length;i++)this._renderer.updateFace(i)}if(t.frn!==void 0&&!this._faceResourceNames.every((i,o)=>i===t.frn[o])){this._faceResourceNames=t.frn;for(let i=0;i<this._faceResourceNames.length;i++)this._renderer.updateFace(i)}t.tint!==void 0&&this._tint!==t.tint&&(this._tint=t.tint,this._renderer.updateTint())}shouldUseTransparentTexture(){return this._shouldUseTransparentTexture}_convertMaterialType(t){return t==="StandardWithoutMetalness"?n.Cube3DRuntimeObject.MaterialType.StandardWithoutMetalness:n.Cube3DRuntimeObject.MaterialType.Basic}setMaterialType(t){const e=this._convertMaterialType(t);this._materialType!==e&&(this._materialType=e,this._renderer._updateMaterials())}updateShadowCasting(t){this._isCastingShadow=t,this._renderer.updateShadowCasting()}updateShadowReceiving(t){this._isReceivingShadow=t,this._renderer.updateShadowReceiving()}}n.Cube3DRuntimeObject=r,function(t){let a;(function(o){o[o.Basic=0]="Basic",o[o.StandardWithoutMetalness=1]="StandardWithoutMetalness"})(a=t.MaterialType||(t.MaterialType={}))}(r=n.Cube3DRuntimeObject||(n.Cube3DRuntimeObject={})),n.registerObject("Scene3D::Cube3DObject",n.Cube3DRuntimeObject)})(gdjs||(gdjs={}));
//# sourceMappingURL=Cube3DRuntimeObject.js.map
